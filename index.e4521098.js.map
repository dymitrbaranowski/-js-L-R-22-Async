{"mappings":"AAsHA,MAAMA,EAAaC,SAASC,cAAc,cACpCC,EAAaF,SAASC,cAAc,WACpCE,EAAOH,SAASC,cAAc,YAC9BG,EAAgBJ,SAASC,cAAc,sBAE7CC,EAAWG,iBAAiB,SAE5B,WACED,EAAcE,mBAAmB,YAJpB,qC,IAOfP,EAAWM,iBAAiB,UAE5B,SAAqBE,GACnBA,EAAIC,iBACJ,MAAMC,EAAO,IAAIC,SAASH,EAAII,gBAkBhCC,eAA4BC,GAC1B,MAAMC,EAAQD,EAAIE,KAAIH,MAAMI,IAC1B,MAAMC,QAAaC,MAAM,uCAAuCF,KAChE,IAAKC,EAAKE,GACR,MAAM,IAAIC,MAGZ,OAAOH,EAAKI,MAAM,IAGdZ,QAAaa,QAAQC,WAAWT,GAMtC,OAJmBL,EAChBe,QAAO,EAACC,OAAEA,KAAwB,cAAXA,IACvBV,KAAI,EAACW,MAAEA,KAAYA,EAAM,I,EA3B5BC,CAJYlB,EACTmB,OAAO,WACPJ,QAAOR,GAAQA,IACfD,KAAIC,GAAQA,EAAKa,UAEjBC,MAAKlB,MAAMK,IACV,MAAMc,EAAWd,EAAKF,KAAI,EAACiB,QAAEA,KAAcA,EAAQ,KAC7CC,QA6BZrB,eAA0BC,GACxB,MAAMqB,EAAW,+BACXC,EAAU,kCAEVrB,EAAQD,EAAIE,KAAIH,MAAMwB,IAC1B,MAAMC,EAAS,IAAIC,gBAAgB,CACjCC,IAAKJ,EACLK,EAAGJ,EACHK,KAAM,OAGFxB,QAAaC,MAAM,GAAGgB,kBAAyBG,KAErD,IAAKpB,EAAKE,GACR,MAAM,IAAIC,MAAMH,EAAKyB,YAEvB,OAAOzB,EAAKI,MAAM,IAGdZ,QAAaa,QAAQC,WAAWT,GAKtC,OAJaL,EACVe,QAAO,EAACC,OAAEA,KAAwB,cAAXA,IACvBV,KAAI,EAACW,MAAEA,KAAYA,G,CAnDWiB,CAAWZ,GACxC5B,EAAKyC,UAuDX,SAAsB/B,GACpB,OAAOA,EACJE,KACC,EACE8B,SAASC,OACPA,EACAC,WAAWC,KAAEA,EAAIC,KAAEA,IAErBC,UAAUC,QAAEA,EAAOC,KAAEA,MAErB,4BAEID,qBACAC,iCAEEH,WAAcD,aACrBA,eACAF,iBAGFO,KAAK,G,CA3EaC,CAAarB,EAAe,IAE9CsB,OAAMC,GAAKC,QAAQC,IAAIF,KACvBG,SAAQ,KACPvD,EAAcwC,UAxBL,qCAyBT7C,EAAW6D,OAAO,G","sources":["src/script.js"],"sourcesContent":["// 'https://restcountries.com/v3.1/name/'\n\n// async function getCapital() {\n//   //Лише в тому випадку, коли з даними працюємо в середині функції\n//   try {\n//     const URL = 'https://restcountries.com/v3.1/name/';\n//     const resp = await fetch(`${URL}Ukraine`);\n//     if (!resp.ok) {\n//       throw new Error(resp.statusText);\n//     }\n//     const data = await resp.json();\n//     console.log(data);\n//   } catch (e) {\n//     console.log(e);\n//   }\n//   console.log('end');\n// }\n\n// async function getCapital() {\n//   // Лише в випадку коли з даними працюємо за межами функції\n//   const URL = 'https://restcountries.com/v3.1/name/';\n//   const arr = ['sdfweee', 'Ukraine', 'France'];\n\n//   const responses = arr.map(async ctr => {\n//     const resp = await fetch(`${URL}${ctr}`);\n//     if (!resp.ok) {\n//       throw new Error('Not found');\n//     }\n//     return resp.json();\n//   });\n\n//   const prom = await Promise.allSettled(responses);\n//   return prom;\n// }\n\n// getCapital()\n//   .then(data => {\n//     const res = data\n//       .filter(({ status }) => status === 'fulfilled')\n//       .map(({ value }) => value[0]);\n//     const rej = data.filter(({ status }) => status === 'rejected');\n//   })\n//   .catch(e => console.log(e));\n// async function getCapital() {\n//     // Лише в випадку коли з даними працюємо в середині функції\n//     try {\n//         const URL = 'https://restcountries.com/v3.1/name/';\n//         const resp = await fetch(`${URL}Ukraine`);\n//         if (!resp.ok) {\n//             throw new Error(resp.statusText)\n//         }\n\n//         const data = await resp.json();\n//         console.log(data);\n//     } catch (e) {\n//         console.log(e);\n//     }\n// }\n// getCapital()\n\n// const arrow = async () => {}\n// const exp = async function(){}\n\n// getCapital()\n\n// const user = {\n//     async getFoo() {},\n\n//     getInfo: async function () {\n\n//     },\n//     getTest: async () => {\n\n//     }\n// }\n\n// async function getCapital() {\n//      // В випадку коли з даними працюємо за межами функції\n//     const URL = 'https://restcountries.com/v3.1/name/';\n//     const resp = await fetch(`${URL}asdfghjiok`);\n//     if (!resp.ok) {\n//         throw new Error(resp.statusText)\n//     }\n\n//     return resp.json();\n// }\n// getCapital()\n// .then(data => console.log(data))\n// .catch(e => console.log(e))\n\n//------------------------------------------------------//\n\n// async function getCapital() {\n//         const URL = 'https://restcountries.com/v3.1/name/';\n//         const arr = ['sadfghjk', 'Ukraine', 'France']\n\n//         const responses = arr.map(async (ctr) => {\n//             const resp = await fetch(`${URL}${ctr}`)\n//             if (!resp.ok) {\n//                 throw new Error('Not found')\n//                 // Promise.reject('Not found')\n//             }\n//             return resp.json()\n//         })\n\n//         const prom = await Promise.allSettled(responses)\n//         return prom;\n// }\n\n// getCapital()\n// .then(data => {\n//     const res = data.filter(({status}) => status === 'fulfilled').map(({value}) => value[0])\n//     const rej = data.filter(({status}) => status === 'rejected')\n// })\n// .catch(e => console.log(e))\n\n// Перерва до 21-10\n\nconst searchForm = document.querySelector('.js-search');\nconst addCountry = document.querySelector('.js-add');\nconst list = document.querySelector('.js-list');\nconst formContainer = document.querySelector('.js-form-container');\nconst markup = '<input type=\"text\" name=\"country\">';\naddCountry.addEventListener('click', handlerAddInput);\n\nfunction handlerAddInput() {\n  formContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nsearchForm.addEventListener('submit', handlerForm);\n\nfunction handlerForm(evt) {\n  evt.preventDefault();\n  const data = new FormData(evt.currentTarget);\n  const arr = data\n    .getAll('country')\n    .filter(item => item)\n    .map(item => item.trim());\n  getCountries(arr)\n    .then(async resp => {\n      const capitals = resp.map(({ capital }) => capital[0]);\n      const weatherService = await getWeather(capitals);\n      list.innerHTML = createMarkup(weatherService);\n    })\n    .catch(e => console.log(e))\n    .finally(() => {\n      formContainer.innerHTML = markup;\n      searchForm.reset();\n    });\n}\n\nasync function getCountries(arr) {\n  const resps = arr.map(async item => {\n    const resp = await fetch(`https://restcountries.com/v3.1/name/${item}`);\n    if (!resp.ok) {\n      throw new Error();\n    }\n\n    return resp.json();\n  });\n\n  const data = await Promise.allSettled(resps);\n\n  const countryObg = data\n    .filter(({ status }) => status === 'fulfilled')\n    .map(({ value }) => value[0]);\n\n  return countryObg;\n}\n\nasync function getWeather(arr) {\n  const BASE_URL = 'http://api.weatherapi.com/v1';\n  const API_KEY = '996939ba8c804529aee100853241011';\n\n  const resps = arr.map(async city => {\n    const params = new URLSearchParams({\n      key: API_KEY,\n      q: city,\n      lang: 'uk',\n    });\n\n    const resp = await fetch(`${BASE_URL}/current.json?${params}`);\n\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n\n  const data = await Promise.allSettled(resps);\n  const Obgs = data\n    .filter(({ status }) => status === 'fulfilled')\n    .map(({ value }) => value);\n\n  return Obgs;\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        current: {\n          temp_c,\n          condition: { text, icon },\n        },\n        location: { country, name },\n      }) =>\n        `<li>\n  <div>\n      <h2>${country}</h2>\n      <h3>${name}</h3>\n  </div>\n  <img src=\"${icon}\" alt=\"${text}\">\n  <p>${text}</p>\n  <p>${temp_c}</p>\n</li>`\n    )\n    .join('');\n}\n// searchForm.addEventListener('submit', handlerForm);\n\n// function handlerForm(evt) {\n//     evt.preventDefault()\n//     const data = new FormData(evt.currentTarget);\n//     const arr = data.getAll('country').filter(item => item).map(item => item.trim())\n//     getCountries(arr)\n//         .then(async resp => {\n//             const capitals = resp.map(({ capital }) => capital[0]);\n//             const weatherService = await getWeather(capitals);\n//             list.innerHTML = createMarkup(weatherService)\n//         })\n//         .catch(e => console.log(e))\n//         .finally(() => {\n//             formContainer.innerHTML = markup\n//             searchForm.reset()\n//         })\n// }\n\n// async function getCountries(arr) {\n//     const resps = arr.map(async item => {\n//         const resp = await fetch(`https://restcountries.com/v3.1/name/${item}`)\n//         if (!resp.ok) {\n//             throw new Error()\n//         }\n\n//         return resp.json()\n//     })\n\n//     const data = await Promise.allSettled(resps)\n//     const countryObj = data.filter(({ status }) => status === \"fulfilled\").map(({ value }) => value[0]);\n\n//     return countryObj;\n// }\n\n// async function getWeather(arr) {\n//     const BASE_URL = \"http://api.weatherapi.com/v1\";\n//     const API_KEY = \"ce2cb9b2a3da414bb5b172546231704\";\n\n//     const resps = arr.map(async city => {\n//         const params = new URLSearchParams({\n//             key: API_KEY,\n//             q: city,\n//             lang: 'uk'\n//         });\n\n//         const resp = await fetch(`${BASE_URL}/current.json?${params}`);\n\n//         if (!resp.ok) {\n//             throw new Error(resp.statusText);\n//         }\n\n//         return resp.json()\n//     })\n\n//     const data = await Promise.allSettled(resps)\n//     const objs = data.filter(({ status }) => status === \"fulfilled\").map(({ value }) => value);\n\n//     return objs\n// }\n\n// function createMarkup(arr) {\n//     return arr.map(({ current: { temp_c, condition: { text, icon } }, location: { country, name } }) =>\n//         `<li>\n//     <div>\n//         <h2>${country}</h2>\n//         <h3>${name}</h3>\n//     </div>\n//     <img src=\"${icon}\" alt=\"${text}\">\n//     <p>${text}</p>\n//     <p>${temp_c}</p>\n// </li>`).join('')\n// }\n"],"names":["$2aac3885343dc6b2$var$searchForm","document","querySelector","$2aac3885343dc6b2$var$addCountry","$2aac3885343dc6b2$var$list","$2aac3885343dc6b2$var$formContainer","addEventListener","insertAdjacentHTML","evt","preventDefault","data","FormData","currentTarget","async","arr","resps","map","item","resp","fetch","ok","Error","json","Promise","allSettled","filter","status","value","$2aac3885343dc6b2$var$getCountries","getAll","trim","then","capitals","capital","weatherService","BASE_URL","API_KEY","city","params","URLSearchParams","key","q","lang","statusText","$2aac3885343dc6b2$var$getWeather","innerHTML","current","temp_c","condition","text","icon","location","country","name","join","$2aac3885343dc6b2$var$createMarkup","catch","e","console","log","finally","reset"],"version":3,"file":"index.e4521098.js.map"}